# UniFi Voucher Management Example

This example demonstrates how to use the UniFi client library to manage guest
vouchers, including creating, listing, and deleting vouchers.

## Features

- List all vouchers with their details (ID, code, duration, status, and notes)
- Create new vouchers with custom duration and notes
- Delete individual vouchers
- Delete all vouchers (with safety confirmation)
- Environment variable configuration support

## Usage

### Running with Environment Variables

```bash
# Set your UniFi controller details
export UNIFI_CONTROLLER="https://unifi.example.com:8443"
export UNIFI_USERNAME="admin"
export UNIFI_PASSWORD="password"
export UNIFI_SITE="default"
export UNIFI_VERIFY_SSL="false"

# Run the example
cargo run --example voucher_management
```

### Running with Prompts

If environment variables are not set, the example will use defaults and prompt
for the password:

```bash
cargo run --example voucher_management
```

## Environment Variables

- `UNIFI_CONTROLLER`: URL of your UniFi controller (default: "https://unifi.example.com:8443")
- `UNIFI_USERNAME`: Username for authentication (default: "admin")
- `UNIFI_PASSWORD`: Password for authentication (optional, will prompt if not set)
- `UNIFI_SITE`: Site to manage vouchers for (default: "default")
- `UNIFI_VERIFY_SSL`: Whether to verify SSL certificates (default: false)

## Menu Options

1. **List Vouchers**: Display all vouchers with their details
2. **Create Vouchers**: Create new vouchers with specified:
   - Number of vouchers
   - Duration (in minutes)
   - Optional note
3. **Delete a Voucher**: Select and delete a specific voucher
4. **Delete All Vouchers**: Remove all vouchers from the system
5. **Exit**: Close the application

## Example Output

```bash
UNIFI_CONTROLLER="https://unifi.example.com:8443" UNIFI_USERNAME="admin" UNIFI_PASSWORD="password" cargo run --example voucher_management

UniFi Voucher Management Example
================================
Controller: https://unifi.openprotocol.xyz:8443
Site: default
âœ… Authentication successful!

Voucher Management Options:
1. List Vouchers
2. Create Vouchers
3. Delete a Voucher
4. Delete All Vouchers
5. Exit

Select an option (1-5): 1

Fetching vouchers...

Found 2 vouchers:
ID         Code            Duration   Status       Note
--------------------------------------------------------------------------------
67dc137c   1170098253      30m        Valid        API created
67dc137c   8793677540      30m        Valid        API created
```

## Notes

- The example includes safety confirmations for destructive operations
- Duration is specified in minutes (e.g., 1440 for 1 day)
- SSL verification is disabled by default for easier testing
- Voucher codes are automatically generated by the UniFi controller
